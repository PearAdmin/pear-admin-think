
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/static/component/pear/css/pear.css" />
</head>
<body class="pear-container">
<div class="layui-row layui-col-space15">
    <div class="layui-col-md12">
        <div class="layui-card">
        <div class="layui-tab layui-tab-brief" lay-filter="TabBrief">
            <ul class="layui-tab-title">
                <li class="layui-this">网站设置</li>
                <li>邮箱设置</li>
                <li>上传设置</li>
            </ul>
            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show">
                    <form class="layui-form edit-form" action="" lay-filter="component-form-element">
                        <input name="formType" value="web" type="hidden"/>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                网站标题
                            </label>
                            <div class="layui-input-block">
                                <input autocomplete="off" class="layui-input" name="title" value="{$data['web']['title']??''}" type="text"/>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                网站关键词
                            </label>
                            <div class="layui-input-block">
                                <input autocomplete="off" class="layui-input"  name="key" value="{$data['web']['key']??''}" type="text"/>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                网站描述
                            </label>
                            <div class="layui-input-block">
                                <textarea name="desc" class="layui-textarea">{$data['web']['desc']??''}</textarea>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                电话
                            </label>
                            <div class="layui-input-block">
                                <input autocomplete="off" class="layui-input"  name="tel" value="{$data['web']['tel']??''}" type="text"/>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                QQ
                            </label>
                            <div class="layui-input-block">
                                <input autocomplete="off" class="layui-input"  name="qq" value="{$data['web']['qq']??''}" type="text"/>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                邮箱
                            </label>
                            <div class="layui-input-block">
                                <input autocomplete="off" class="layui-input"  name="mail" value="{$data['web']['mail']??''}" type="text"/>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                地址
                            </label>
                            <div class="layui-input-block">
                                <input autocomplete="off" class="layui-input"  name="addr" value="{$data['web']['addr']??''}" type="text"/>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                网站LOGO
                            </label>
                            <div class="layui-input-block">
                            <button class="pear-btn pear-btn-primary pear-btn-sm  upload-image" type="button">
                                    <i class="fa fa-image">
                                    </i>
                                    上传图片
                                </button>
                                <input lay-verify="uploadlogo" name="logo" type="hidden" value="{$data['web']['logo']??''}"/>
                                <div class="upload-image">
                                    <span>
                                    </span>
                                    <img class="upload-image" src="{$data['web']['logo']??''}"/>
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                网站海报
                            </label>
                            <div class="layui-input-block">
                            <button class="pear-btn pear-btn-primary pear-btn-sm upload-image" type="button">
                                    <i class="fa fa-image">
                                    </i>
                                    上传图片
                                </button>
                                <input lay-verify="uploadbg" name="bg" type="hidden" value="{$data['web']['bg']??''}"/>
                                <div class="upload-image">
                                    <span>
                                    </span>
                                    <img class="upload-image" src="{$data['web']['bg']??''}"/>
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">
                                登录验证码
                            </label>
                            <div class="layui-input-block">
                                {if $data['web']['login_captcha']}
                                <input checked="" lay-filter="login_captcha" lay-skin="switch" lay-text="开启|关闭" name="login_captcha" type="checkbox" value="1"/>
                                {else}
                                <input lay-filter="login_captcha" lay-skin="switch" lay-text="开启|关闭" name="login_captcha" type="checkbox" value=""/>
                                {/if}
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button type="submit" class="pear-btn pear-btn-primary" lay-submit="" lay-filter="configform">保存设置</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="layui-tab-item">
                    <form class="layui-form edit-form" action="" lay-filter="component-form-element">
                        <input name="formType" value="email" type="hidden"/>
                        <div class="layui-form-item">
                        <label class="layui-form-label">
                            邮箱账号
                        </label>
                        <div class="layui-input-block">
                            <input autocomplete="off" class="layui-input" name="smtp-user" value="{$data['email']['smtp-user']??''}" type="text"/>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">
                            邮箱密匙
                        </label>
                        <div class="layui-input-block">
                            <input autocomplete="off" class="layui-input"  name="smtp-pass" value="{$data['email']['smtp-pass']??''}" type="text"/>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">
                            邮箱端口
                        </label>
                        <div class="layui-input-block">
                            <input autocomplete="off" class="layui-input"  name="smtp-port" value="{$data['email']['smtp-port']??''}" type="text"/>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">
                            邮箱服务器
                        </label>
                        <div class="layui-input-block">
                            <input autocomplete="off" class="layui-input"  name="smtp-host" value="{$data['email']['smtp-host']??''}" type="text"/>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button type="submit" class="pear-btn pear-btn-primary" lay-submit="" lay-filter="configform">保存设置</button>
                        </div>
                    </div>
                    </form>
                </div>
                <div class="layui-tab-item">
                    <form class="layui-form edit-form" action="" lay-filter="component-form-element">
                        <input name="formType" value="file" type="hidden"/>
                        <div class="layui-form-item">
                            <label class="layui-form-label">存储方式</label>
                            <div class="layui-input-block">
                              <input type="radio" name="file-type" value="1" title="本地" {if condition="$data['file']['file-type'] eq 1"} checked {/if} lay-filter="type">
                              <input type="radio" name="file-type" value="2" title="阿里云" {if condition="$data['file']['file-type'] eq 2"} checked {/if} lay-filter="type">
                            </div>
                        </div>
                        <div class="layui-form-item" id="oss" {if condition="$data['file']['file-type'] neq 2"} style="display: none;" {/if}>
                            <div class="layui-form-item">
                                <label class="layui-form-label">Oss地址</label>
                                <div class="layui-input-block">
                                    <input type="text" name="file-endpoint"  value="{$data['file']['file-endpoint']??''}"  placeholder="请输入Oss地址" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">空间名称</label>
                                <div class="layui-input-block">
                                    <input type="text" name="file-OssName"   value="{$data['file']['file-OssName']??''}" placeholder="请输入空间名称" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">KeyId</label>
                                <div class="layui-input-block">
                                    <input type="text" name="file-accessKeyId"   value="{$data['file']['file-accessKeyId']??''}" placeholder="请输入KeyId" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">KeySecret</label>
                                <div class="layui-input-block">
                                    <input type="text" name="file-accessKeySecret"   value="{$data['file']['file-accessKeySecret']??''}"  placeholder="请输入KeySecret" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button type="submit" class="pear-btn pear-btn-primary" lay-submit="" lay-filter="configform">保存设置</button>
                            </div>
                        </div>
                    </form>
                </div>
                </div>
            </div>      
        </div>
    </div>
</div>
<script src="/static/component/layui/layui.js"></script>
<script src="/static/component/pear/pear.js"></script>
<script>
layui.use(['form', 'jquery', 'uploads'], function() {
    let form = layui.form;
    let $ = layui.jquery;
    form.on('switch(login_captcha)', function(data) {
        if (data.elem.checked) {
            $(data.elem).val('1');
        } else {
            $(data.elem).val('0');
        }
    });
    form.on('submit(configform)', function(data) {
        if (!data.field.login_captcha) {
            data.field.login_captcha = '0';
        }
        $.ajax({
            data:data.field,
            type:'post',
            success:function(result){
                layer.msg(result.msg,{icon:1,time:1000},function(){});
            }
        })
        return false;
    });
    form.on('radio(type)', function(data){
        if(data.value==2){
            $("#oss").show();
        }else{
            $("#oss").hide();
        }
    });  
})
</script>
</body>
</html>
